<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
 <meta http-equiv="Content-Security-Policy"
  content="default-src 'self';
           script-src 'self' 'unsafe-inline' https://www.google.com https://www.gstatic.com https://cdnjs.cloudflare.com;
           style-src 'self' 'unsafe-inline';
           img-src 'self' data: https:;
           font-src 'self' https://fonts.gstatic.com;
           connect-src 'self' https://script.google.com https://script.googleusercontent.com https://www.google.com;
           frame-src https://script.google.com https://script.googleusercontent.com https://www.google.com https://www.gstatic.com;">
          >

  <link rel="icon" href="/favicon-16x16.png" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Exhibition - The Future of Fair Launches</title>

  <style>
    /* your original styles kept exactly as provided */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --metallic-silver: #C0C0C0;
      --silver-light: #E8E8E8;
      --silver-dark: #A0A0A0;
      --neon-blue: #15c6e6c0;
      --neon-orange: #fa7e09cb;
      --deep-black: #1A1A1A;
      --charcoal: #0A0A0A;
      --dark-black: #000000;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--dark-black);
      color: var(--silver-light);
      overflow-x: hidden;
      padding-bottom: 4rem;
    }
    header { text-align: center; padding: 5rem 2rem 2rem; background: radial-gradient(circle at center, var(--charcoal) 0%, var(--dark-black) 100%); }
    header h1 { font-size: 2.4rem; background: linear-gradient(90deg, var(--neon-blue), var(--neon-orange)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
    header p { margin-top: 1rem; color: var(--silver-dark); font-size: 1.1rem; }
    .header-access-banner { margin-top: 3rem; padding: 2rem; background: rgba(21,198,230,0.08); border: 1px solid rgba(21,198,230,0.3); border-radius: 16px; max-width: 700px; margin-left: auto; margin-right: auto; }
    .features-section { background: var(--deep-black); padding: 4rem 2rem 3rem; }
    .features-header { text-align: center; margin-bottom: 3rem; }
    .features-header h2 { font-size: 2.5rem; background: linear-gradient(90deg, var(--neon-blue), var(--neon-orange)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; }
    .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(270px, 1fr)); gap: 2rem; }
    .feature-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.07); border-radius: 12px; padding: 1.5rem; transition: transform 0.2s ease, border 0.2s ease; }
    .feature-card:hover { transform: translateY(-5px); border-color: var(--neon-blue); }
    .feature-icon { font-size: 1.8rem; margin-bottom: 0.8rem; }
    .testnet-notice { padding: 3rem 2rem; background: rgba(255,255,255,0.05); margin: 3rem 1rem; border-left: 4px solid var(--neon-blue); border-radius: 8px; }
    .early-access { padding: 4rem 2rem; text-align: center; background: var(--charcoal); }
    .access-title { font-size: 2.5rem; font-weight: bold; background: linear-gradient(90deg, var(--neon-blue), var(--neon-orange)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.8rem; animation: fadeIn 0.8s ease-out; }
    .access-subtitle { font-size: 1.1rem; color: var(--silver-light); font-weight: 300; letter-spacing: 0.5px; }
    .registration-form { margin: 0 auto; max-width: 640px; background: rgba(255,255,255,0.03); padding: 2rem; border-radius: 16px; border: 1px solid rgba(255,255,255,0.05); text-align: left; }
    .intro-details { color: var(--silver-light); margin-bottom: 1rem; line-height:1.6; }
    .form-grid { display:grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .form-group { margin-bottom: 1rem; }
    label { display:block; margin-bottom:0.4rem; color:var(--silver-light); font-weight:500; }
    input[type="text"], input[type="url"], input[type="email"] { width:100%; padding:0.8rem; border-radius:8px; border:1px solid rgba(255,255,255,0.07); background:var(--deep-black); color:var(--silver-light); }
    .submit-btn { background: linear-gradient(90deg, var(--neon-blue), var(--neon-orange)); color: #fff; padding: 0.8rem 1.5rem; font-size: 1rem; border: none; border-radius: 8px; cursor: pointer; transition: opacity 0.2s; width: 100%; }
    .submit-btn:disabled { opacity: 0.5; cursor:not-allowed; }
    .inline-alert { padding: 1rem; border-radius: 10px; margin-top: 1rem; display:none; }
    .inline-alert.show { display:block; }
    .inline-alert.error { background: rgba(250,126,9,0.12); border: 1px solid var(--neon-orange); color: var(--neon-orange); }
    .inline-alert.success { background: rgba(21,198,230,0.12); border: 1px solid var(--neon-blue); color: var(--neon-blue); }
    .debug-console { margin-top: 1rem; padding: 1rem; background: rgba(0,0,0,0.5); border: 1px solid var(--silver-dark); border-radius: 8px; max-height: 120px; overflow-y:auto; font-family: monospace; font-size:0.85rem; color:#00ff00; }
    footer { text-align:center; padding:2rem; border-top:1px solid rgba(255,255,255,0.06); background:var(--deep-black); color:var(--silver-dark); }
    @keyframes fadeIn { from { opacity:0; transform:translateY(10px) } to { opacity:1; transform:translateY(0) } }
    @media (max-width:700px){
      .form-grid { grid-template-columns: 1fr; }
      .registration-form { padding:1rem; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Exhibition Defi</h1>
    <p>Pioneering verifiable Fair Token Launches for the AI Era on Nexus</p>
    <div class="header-access-banner">
      <h2 class="access-title">Early Access Registration</h2>
      <p class="access-subtitle">Join the Testnet Waitlist - Limited Spots Available</p>
    </div>
  </header>

  <section class="features-section">
    <div class="features-header">
      <h2>Why Choose Exhibition</h2>
    </div>
    <div class="features">
      <div class="feature-card"><div class="feature-icon">üîí</div><h3>Liquidity Lock Enforcement</h3><p>Smart contract-enforced liquidity locks.</p></div>
      <div class="feature-card"><div class="feature-icon">‚öñÔ∏è</div><h3>Fair Token Distribution</h3><p>Transparent vesting schedules with cliff periods. No surprises, no games.</p></div>
      <div class="feature-card"><div class="feature-icon">üõ°Ô∏è</div><h3>Soft Cap Protection</h3><p>Projects must reach soft cap or all funds refunded automatically.</p></div>
      <div class="feature-card"><div class="feature-icon">üíé</div><h3>Automatic LP Creation</h3><p>Initial liquidity automatically added and locked securely.</p></div>
      <div class="feature-card"><div class="feature-icon">üéØ</div><h3>Hard Cap Limits</h3><p>Instant finalization when hard cap is reached. No manipulation.</p></div>
      <div class="feature-card"><div class="feature-icon">ü§ñ</div><h3>Built for AI Era</h3><p>Powered by Nexus Verifiable Layer Network for scalable AI computation.</p></div>
    </div>
  </section>

  <section class="early-access">
    <div class="registration-form">
      <!-- Intro / descriptive details (uses your colors & typography) -->
      <div class="intro-details">
        <h3 style="margin-bottom:8px; color:var(--neon-blue);">What is Early Access?</h3>
        <p>
          Join the Exhibition Early Access program to test the platform, provide feedback, and secure a place on our testnet launch.
          Please follow the steps above (follow, like/comment, repost) and paste your repost link below.
        </p>
        <p style="margin-top:8px; color:var(--silver-dark)">
          ‚ö†Ô∏è Only verified reposts of our official pinned post (@ExhibitionDeFi) qualify. We will manually verify reposts and wallet ownership.
        </p>
      </div>

      <!-- The secure form: POSTs directly to Apps Script via hidden iframe (no fetch, no CORS) -->
      <form id="accessForm"
            action="https://script.google.com/macros/s/AKfycbyY8dPzoRVmLaJUEClqqNkWOmUJoV1XAf7nn5a-ny_4XQrxte3_0qS4G3YPCvU5mMNuGQ/exec"
            method="POST"
            target="hidden_iframe"
            autocomplete="off"
      >
        <div class="form-grid">
          <div class="form-group">
            <label for="twitter">Your X (Twitter) Handle *</label>
            <input type="text" id="twitter" name="twitter" placeholder="@yourusername" required maxlength="16" />
          </div>

          <div class="form-group">
            <label for="wallet">Your Wallet Address *</label>
            <input type="text" id="wallet" name="wallet" placeholder="0x..." required pattern="^0x[a-fA-F0-9]{40}$" maxlength="42" />
          </div>

          <div class="form-group" style="grid-column:1 / -1;">
            <label for="proof">Proof of Repost (Tweet URL) *</label>
            <input type="url" id="proof" name="proof" placeholder="https://x.com/yourusername/status/..." required maxlength="200" />
          </div>
        </div>

        <!-- Honeypot (invisible to real users, catches bots) -->
        <input type="text" name="website" id="website_hp" style="display:none" tabindex="-1" autocomplete="off" />

        <!-- reCAPTCHA widget: keep it, server will verify token -->
        <div style="margin:1rem 0;">
          <div class="g-recaptcha" data-sitekey="6LfQ-vArAAAAAN3L3Qug7MHQg_50xGFgvdiTKVzG"></div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn"><span>üöÄ Request Early Access</span></button>

        <div id="inlineMessage" class="inline-alert"></div>
        <div id="debugConsole" class="debug-console" aria-hidden="true"></div>
      </form>

      <!-- hidden iframe used to receive the form response so the page doesn't navigate away -->
      <iframe name="hidden_iframe" style="display:none;"></iframe>
    </div>
  </section>

  <footer>
    <div class="social-links">
      <a href="https://x.com/ExhibitionDeFi" target="_blank" rel="noopener noreferrer" title="X (Twitter)">ùïè</a>
      <a href="#" title="Discord">üí¨</a>
      <a href="#" title="Telegram">‚úàÔ∏è</a>
      <a href="https://github.com/ExhibitionDefi" target="_blank" rel="noopener noreferrer" title="GitHub">üíª</a>
    </div>
    <p style="color:var(--silver-dark);">Built on Nexus Verifiable Layer Network | Testnet Phase | Community-Driven Development</p>
    <p style="color:var(--silver-dark); margin-top:1rem; font-size:0.9rem;">¬© 2025 Exhibition Defi</p>
  </footer>

  <script>
    /* Lightweight client validation + XSS-detection for user-friendly errors.
       IMPORTANT: server must still perform full validation and sanitization. */

    const inlineMsg = document.getElementById('inlineMessage');
    const debugConsole = document.getElementById('debugConsole');

    const walletRegex = /^0x[a-fA-F0-9]{40}$/;
    const twitterRegex = /^[A-Za-z0-9_]{1,15}$/;
    const repostRegex = /^https?:\/\/(x|twitter)\.com\/[A-Za-z0-9_]{1,15}\/status\/[0-9]+$/i;
    const XSS_PATTERNS = [ /<script/i, /javascript:/i, /on\w+=/i, /<iframe/i ];

    function log(msg){
      const ts = new Date().toLocaleTimeString();
      debugConsole.innerHTML += `[${ts}] ${String(msg).replace(/</g,'&lt;')}<br>`;
      debugConsole.scrollTop = debugConsole.scrollHeight;
      console.log(msg);
    }

    function showMessage(text, type='error'){
      inlineMsg.textContent = text;
      inlineMsg.className = 'inline-alert show ' + (type === 'success' ? 'success' : 'error');
      setTimeout(()=> inlineMsg.classList.remove('show'), 7000);
      log(`Message shown: ${text}`);
    }

    function detectXSS(value){
      if(!value) return false;
      for(const p of XSS_PATTERNS) if(p.test(value)) return true;
      return false;
    }

    // Client validation on submit ‚Äî if passes, form will POST normally (no fetch)
    document.getElementById('accessForm').addEventListener('submit', function(e){
      // quick checks
      const twitter = (document.getElementById('twitter').value || '').trim().replace(/^@/, '');
      const wallet = (document.getElementById('wallet').value || '').trim();
      const proof = (document.getElementById('proof').value || '').trim();
      const hp = (document.getElementById('website_hp').value || '').trim();

      // honeypot filled? block
      if(hp){
        e.preventDefault();
        showMessage('Bot detected. Submission blocked.', 'error');
        log('Honeypot blocked submission');
        return;
      }

      if(detectXSS(twitter) || detectXSS(wallet) || detectXSS(proof)){
        e.preventDefault();
        showMessage('Invalid characters detected. Please remove special characters.', 'error');
        return;
      }

      if(!twitterRegex.test(twitter)){
        e.preventDefault();
        showMessage('Please enter a valid X handle (alphanumeric or underscore).', 'error');
        return;
      }

      if(!walletRegex.test(wallet)){
        e.preventDefault();
        showMessage('Please enter a valid wallet address (0x...).', 'error');
        return;
      }

      if(!repostRegex.test(proof) || !proof.toLowerCase().includes('exhibitiondefi')){
        e.preventDefault();
        showMessage('Please provide a valid repost of @ExhibitionDeFi.', 'error');
        return;
      }

      // Let the form post to Apps Script. Show submitting state.
      const btn = document.getElementById('submitBtn');
      btn.disabled = true;
      btn.innerText = '‚è≥ Submitting...';

      // restore button after a delay in case the Apps Script response doesn't reload the page
      setTimeout(()=>{ btn.disabled=false; btn.innerText='üöÄ Request Early Access'; }, 8000);
      // Note: response handling (success/failure) will be done server-side; you can optionally return HTML that the iframe can display
    });

    // show initial log
    log('Page loaded successfully (form POST mode).');
  </script>

  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</body>
</html>
